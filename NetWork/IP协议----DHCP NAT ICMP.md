## IP协议----DHCP NAT ICMP

### DHCP

#### 为什么使用DHCP？

- DHCP（Dynamic Host Configuration）动态主机配置协议。特点在于动态配置主机的网络相关信息，避免网络管理员手工操作的方式，实现了IP动态自动分配。
- DHCP可以给每一个接入网络的主机分配一个临时的IP地址（每次登录都会改变），也可以给特定的主机分配固定的IP地址。
- 出了IP地址外，DHCP还会分配子网掩码，第一跳的路由地址（默认网关），与本地DNS服务器。

#### DHCP的工作机制

1. **DHCP服务器发现**。发送一个**DHCP发现报文**（DHCP discover message），因为主机还不知道自己的IP地址，所以发送信息使用广播目的地址255.255.255.255 且使用本主机源地址0.0.0.0。由链路层将该帧广播到所有与该子网连接的子网。
2. **DHCP服务器提供**。DHCP服务器接受到一个DHCP发现报文时，用一个**DHCP提供报文**给客户响应。报文里含有：收到的发现报文的事务ID，向客户推荐的IP地址，子网掩码，以及**IP地址租用期**。
3. **DHCP请求**。新到达的客户从一个或多个服务器中选择一个，并向选中的服务器提供一**DHCP**请求报文进行响应，回显配置参数。
4. **DHCP ACK**。服务器用**DHCP ACK**报文对DHCP请求报文进行响应，证实所要求的参数。

#### 中继代理

- 如果所在子网没有DHCP服务器，则经过中继代理（一般是一台路由器），这个代理知道DHCP服务器的地址，代为传送报文和响应。

### NAT

### ICMP

