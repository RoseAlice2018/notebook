## IP协议

## IPV4首部

![](C:\Users\15052\Desktop\博客\计算机网络\IP\IP首部.jpg)

- IP数据包的首部几乎囊括了IP协议中所有重要的部分，所以从IP数据包的首部谈起可以，较为清晰的对于IP协议有一个详细的把握。

### 版本

​	0-4 由4比特组成，标识着IP协议的版本号，如果是IPV4的话，是4.如果是IPV6的话是6.

- IP协议像其他网络协议一样是由多个公司和组织共同参与开发的协议，所以并不像由单独的软件公司开发的软件一样（版本号最新的就是最高版本），而是为不同公司或组织开发的版本各分配一个版本号。而在实践中最为接受的，则为下一代版本。比如IPV6是IPV4的下一代版本。

### 首部长度

首部长度记录的是IP协议首部的大小，单位为4字节，如果可选字段没有的话，一般填写5.

### 区分服务

用8bit表示，设计用来表示服务质量。但在一般现实生活应用中，予以省略。（毕竟传来传去已经很累了，哪里还要照顾这个大小姐。）

### 总长度

表示IP数据报首部和数据包部分合起来的总字节数。该部分共16位，所以理论上IP的最大长度是65535字节。

但实际上不能，因为数据链路层一次所能承载的IP数据报大小有限，所以一般要进行切片处理。（为什么数据链路层所能承载的数据报大小有限呢？）



**以下三个数据段均涉及到IP数据包分段问题，故另开一章，点击就送**

### 标识 identification

### 标志 flags

### 片位移

### 生存时间

由8比特构成，它最初的意思是以秒为单位记录当前在网络上应该生存的期限。然而，在实际中它是指可以中转多少个路由器的意思。每经过一个路由器，TTL-1.直到变成0.

### 协议 Protocol

8比特。表示IP传输层的上层协议号。

### 首部检验和

校验IP数据报的首部是否正常。

### 源地址

发送端IP地址。

### 目的地址

接收端IP地址。

###  可选字段和填充

长度可变，只在进行实验或诊断时使用。

### 数据部分

存入数据。将IP上层的首部也作为数据进行处理。

